<%= form_tag update_multiple_translations_path, :method => :put do |f| %>

<table id="translations">
  <tr>
    <th><%= t(:key) %></th>
    <% languages(@translations).each do |lang| %>
      <th><%= t(lang) %></th>
    <% end %>
  </tr>
  <% sorted_unique_suffixes(@translations).each_with_index do |suffix,i| %>
    <tr>
      <td><%= suffix %></td>
      <% languages(@translations).each do |lang| %>
      <td>
        <% if lang == 'en' %>
          <%= text_field_tag "english[#{i}][value]", translate_or_skip(suffix,lang) %>
          <%= hidden_field_tag "english[#{i}][key]", key_value(suffix) %>
          <%= hidden_field_tag "english[#{i}][locale]", locale("#{lang}.#{suffix}") %>
        <% else %>
          <%= text_field_tag "persian[#{i}][value]", translate_or_skip(suffix,lang) %>
          <%= hidden_field_tag "persian[#{i}][key]", key_value(suffix) %>
          <%= hidden_field_tag "persian[#{i}][locale]", locale("#{lang}.#{suffix}") %>
        <% end %>
      </td>
      <% end %>
    </tr>
  <% end %>
</table>

<%= submit_tag update(:translations), :class => :submit %>
<% end %>
